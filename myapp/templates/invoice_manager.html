<!DOCTYPE html>
<html lang="en">
{% load static %}
<head>
    <meta charset="UTF-8">
    <title>Invoice manager</title>
    <!-- Gọi file css trong folder static -->
    <link rel="stylesheet" href="{% static 'styles/invoice_manager.css' %}">
</head>
<body>
<h1>Danh sách hóa đơn</h1>
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li {% if message.tags %} class="{{ message.tags }}" {% endif %}>
        {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}Important: {% endif %}
        {{ message }}
    </li>
    {% endfor %}
</ul>
{% endif %}
{% if request.user.role == 'Nhân viên bán hàng' %}
<a href="/export_motor/">Xuất hàng</a>
{% elif request.user.role == 'Nhân viên kho' %}
<a href="/import_motor/">Nhập hàng</a>
{% endif %}
<a href="/">Trang chủ</a>
<form action="/invoice_manager/" method="POST">
    {% csrf_token %}
    <input type="text" name="keyword">
    <input type="submit" name="submit" value="Tìm kiếm">
</form>
<table style="width:100%">
    <tr>
        <td style="display: none">Thông tin</td>
        <td style="display: none">Quản lý</td>
    </tr>
    {% for invoice in page_obj %}
    <tr>
        <td>
            <li>Id hóa đơn: {{ invoice.invoice_id }}</li>
            <li>Tổng tiền: {{ invoice.total }}</li>
            <li>Số tiền đã thanh toán: {{ invoice.payment }}</li>
        </td>
        <td>
            <a href="/show_invoice/{{ invoice.invoice_id }}/">Xem thông tin hóa đơn</a>
            <a href="/receipt_history/{{ invoice.invoice_id }}/">Xem lịch sử thanh toán</a>
            {% if request.user.role == 'Nhân viên bán hàng' %}
            <a href="/export_receipt/{{ invoice.invoice_id }}">Thanh toán</a>
            {% elif request.user.role == 'Nhân viên kho' %}
            <a href="/import_receipt/{{ invoice.invoice_id }}">Thanh toán</a>
            {% endif %}
        </td>
    </tr>
    <tr></tr>
    {% endfor %}
</table>
<div class="pagination"> <span class="step-links">
    {% if page_obj.has_previous %}
    <a href="?page=1">« Đầu tiên</a>
    <a href="?page={{ page_obj.previous_page_number }}">Trước</a>
    {% endif %}

    <span class="current">
        Trang {{ page_obj.number }} của {{ page_obj.paginator.num_pages }}.
    </span>

    {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}">Tiếp theo</a>
        <a href="?page={{ page_obj.paginator.num_pages }}">Cuối cùng »</a>
    {% endif %}
</span>
</div>
<!-- Gọi file js trong folder static -->
<script src="{% static 'scripts/motorư_manager.js' %}"></script>
</body>
</html>